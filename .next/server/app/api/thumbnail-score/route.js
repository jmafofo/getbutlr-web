(()=>{var e={};e.id=368,e.ids=[368],e.modules={7495:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=7495,e.exports=r},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},9027:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>b,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{POST:()=>d});var s=t(9303),i=t(8716),a=t(670),n=t(7070),u=t(785);!function(){var e=Error("Cannot find module 'openai'");throw e.code="MODULE_NOT_FOUND",e}();let c=(0,u.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),p=Object(function(){var e=Error("Cannot find module 'openai'");throw e.code="MODULE_NOT_FOUND",e}())({apiKey:process.env.OPENAI_API_KEY});async function d(e){let{user_id:r,video_id:t,thumbnail_url:o}=await e.json(),s=`
You are an expert YouTube thumbnail evaluator.
Evaluate the following thumbnail URL: ${o}
Provide a score from 0 to 100 and written feedback based on:
1. Clarity and composition,
2. Emotional engagement,
3. Text readability,
4. Brand consistency.

Response format:
{"score": <integer>, "feedback": "<your feedback>"}
`,i=JSON.parse((await p.chat.completions.create({model:"gpt-4",messages:[{role:"user",content:s}],temperature:.3})).choices[0].message.content);return await c.from("thumbnail_scores").insert({user_id:r,video_id:t,thumbnail_url:o,score:i.score,feedback:i.feedback}),n.NextResponse.json(i)}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/thumbnail-score/route",pathname:"/api/thumbnail-score",filename:"route",bundlePath:"app/api/thumbnail-score/route"},resolvedPagePath:"/Users/josephmafofo/bin/getbutlr-web/app/api/thumbnail-score/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:b}=l,f="/api/thumbnail-score/route";function x(){return(0,a.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972,785],()=>t(9027));module.exports=o})();